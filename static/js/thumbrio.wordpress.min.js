function saveUserAndPassword(e){function n(e,n,r,i){var s=WP_AUXILIAR.createElement("input",{type:n,name:r,value:i,"class":e});t.form.appendChild(s)}function r(e,n){if(!document.querySelector(".wrap ."+e)){var r=WP_AUXILIAR.createElement("div",{id:"message","class":e});r.innerHTML=n;var i=document.querySelector(".wrap");var s=i.querySelector("#message");if(s)s.remove();i.insertBefore(r,i.children[0]);WP_AUXILIAR.removeElementsClass(t.boxSubmit,"quick_status")}}function i(e){if(e.readyState==4&&e.status==200){var i=JSON.parse(e.response);n(t.classnameResult,"hidden","thumbrio_signed",i.signed);n(t.classnameResult,"hidden","thumbrio_webdir",i.webdir);n(t.classnameResult,"hidden","thumbrio_location",i.location);r(t.classnameOk,t.messageOk);t.form.onsubmit=null;t.form.submit.click();t.form.onsubmit=s;return false}else if(e.readyState===4){var o=e.response;if(o.length===0)o=t.unexpectedErrorMessage;r(t.classnameError,"<strong>Error</strong>: "+o)}}function s(n){if(document.getElementsByClassName(t.classnameResult).length>0)return true;WP_AUXILIAR.removeElementsClass(document,"error");WP_AUXILIAR.removeElementsClass(document,"updated");var s={secretKey:document.querySelector('input[name="thumbrio_secret_key"]').value,baseUrl:document.querySelector('input[name="thumbrio_subdomain"]').value};if(s.secretKey.length===0||s.baseUrl.length===0){if(s.secretKey.length===0){r(t.classnameError,"The field <strong>secret key</strong> is mandatory. "+'To consult your secret key click <a href="https://www.thumbr.io/profile/#credentials">here</a>.')}else{r(t.classnameError,"The field <strong>subdomain</strong> is mandatory. "+'To consult all your subdomains click <a href="https://www.thumbr.io/profile/hostname">here</a>.')}return false}var o=e+"?subdomain="+s.baseUrl+".thumbr.io"+"&date="+(new Date).toJSON();s["signature"]=hex_hmac_md5(s.secretKey,WP_AUXILIAR._thumbrioUrlencode(o).replace(/\/\//g,"%2F%2F"));var u=WP_AUXILIAR.getXHRRequestObject();u.onreadystatechange=function(){i(u)};u.open("GET",o+"&signature="+s.signature);u.send();return false}var t={boxSubmit:document.querySelector(".submit"),btnSubmit:document.querySelector("#submit"),form:document.querySelector("form"),iframe:document.querySelector("#hiddeniframe"),classnameOk:"updated",classnameError:"error",classnameResult:"wordpress-value",messageOk:"<strong>Everything went ok</strong>. Now, all your images will be served by your domain of thumbr.io",unexpectedErrorMessage:"<strong>There was an unexpected error</strong>"};t.form.onsubmit=s}WP_AUXILIAR={checkStatusId:0,createElement:function(e,t){var n=document.createElement(e);var r;for(r in t){n.setAttribute(r,t[r])}return n},_thumbrioUrlencode:function(e){function t(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}return encodeURIComponent(e).replace(/[~!'()\*]/g,t).replace(/%2F/g,"/")},thumbrio:function(e,t,n,r,i,s){var o=WP_AUXILIAR._thumbrioUrlencode(t.replace(/^http:\/\//,""));var u=o;var a="";if(!n){n=""}if(n){if(n[0]!=="?"){u+="?"}u+=n}if(s){s=s+"/";u=s+u.replace(/\/\//g,"%2F%2F")+"/x/thumb.png"}u=s+u.replace(/\/\//g,"%2F%2F");if(i){a=hex_hmac_md5(e,r+u)+"/"}return r+a+u},buildUrl:function(e,t,n,r,i){function s(e){var t;var n="";for(t in e){n+=t+"="+e[t]+"&"}return n.slice(0,n.length-1)}var o=s(e.queryArguments);return WP_AUXILIAR.thumbrio(t,unescape(e.url),o,n,r,i)},parseUrl:function(e,t){function n(e){var t=e.match(/[^?\?\&]+/gi);var n,r,i;var s={};for(i=0;i<t.length;i++){n=t[i].match(/^[^\=]+/);if(n&&!n[0].match(/^__.+/)){s[n[0]]=t[i].substr(n[0].length+1)}}return s}var r;r=e;var i=r.match(/\?[^\?]+$/);if(i){i=n(i[0]);r=r.replace(new RegExp("\\?[^\\?]+$"),"")}var s=r.match("^(https?://[^/]+)/");if(s){s=s[1];r=r.replace(new RegExp("^https?\\:\\/\\/[^\\/]+\\/"),"")}var o=null;if(t){o=r.match("^([^/]+)/");if(o){o=o[1];r=r.replace(new RegExp("^[^\\/]+\\/"),"")}}return{domain:s,hmac_token:o,url:r,queryArguments:i}},getXHRRequestObject:function(){var e;if(window.XMLHttpRequest){e=new XMLHttpRequest}else{e=new ActiveXObject("Microsoft.XMLHTTP")}return e},removeElementsClass:function(e,t){var n=e.getElementsByClassName(t);var r;for(r=n.length-1;r>=0;r--){n[r].remove()}},updateUrl:function(e,t,n,r,i,s){var o=WP_AUXILIAR.parseUrl(e,t);var u;o["queryArguments"]["thumbrio-edit"]=o["queryArguments"]["thumbrio-apply"];if(i){for(u in i){o["queryArguments"][u]=i[u]}}return WP_AUXILIAR.buildUrl(o,n,r,t,s)},getToken:function(){return(new Date).getTime()},addNonSignedArgument:function(e){var t="__v="+WP_AUXILIAR.getToken();if(e.indexOf("?")>=0){if(e.indexOf("?")<e.length-1){e+="&"}}else{e+="?"}e+=t;return e}}